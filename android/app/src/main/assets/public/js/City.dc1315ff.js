(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["City"],{"0a49":function(t,e,i){var r=i("9b43"),n=i("626a"),s=i("4bf8"),c=i("9def"),o=i("cd1c");t.exports=function(t,e){var i=1==t,a=2==t,u=3==t,l=4==t,h=6==t,f=5==t||h,y=e||o;return function(e,o,d){for(var p,v,b=s(e),m=n(b),C=r(o,d,3),O=c(m.length),w=0,g=i?y(e,O):a?y(e,0):void 0;O>w;w++)if((f||w in m)&&(p=m[w],v=C(p,w,b),t))if(i)g[w]=v;else if(v)switch(t){case 3:return!0;case 5:return p;case 6:return w;case 2:g.push(p)}else if(l)return!1;return h?-1:u||l?l:g}}},1169:function(t,e,i){var r=i("2d95");t.exports=Array.isArray||function(t){return"Array"==r(t)}},"1c82":function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"city"},[i("city-search",{attrs:{cityList:t.cityList},on:{choose:t.chooseCity}}),i("city-tabbar"),i("city-list",{attrs:{historyCity:t.historyCity,hotCities:t.hotCities,cityList:t.cityList,letter:t.letter},on:{choose:t.chooseCity}}),i("city-alphabet",{attrs:{cityList:t.cityList},on:{change:t.changeLetter}})],1)},n=[],s=(i("8e6e"),i("ac6a"),i("456d"),i("20d6"),i("96cf"),i("3b8d")),c=i("bd86"),o=i("5880"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"search",style:t.searchStyle},[i("div",{staticClass:"header"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.isFocus,expression:"!isFocus"}],staticClass:"close"},[i("router-link",{attrs:{to:"/"}},[i("i",{staticClass:"iconfont"},[t._v("")])])],1),i("div",{staticClass:"input"},[i("i",{staticClass:"iconfont"},[t._v("")]),i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.keyword,expression:"keyword",modifiers:{trim:!0}}],attrs:{type:"search",placeholder:"搜索全球城市"},domProps:{value:t.keyword},on:{focus:t.handleFocus,blur:[t.handleBlur,function(e){return t.$forceUpdate()}],input:function(e){e.target.composing||(t.keyword=e.target.value.trim())}}})]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isFocus,expression:"isFocus"}],staticClass:"cancel",on:{click:t.cancelSearch}},[t._v("取消")])]),i("better-scroll",{directives:[{name:"show",rawName:"v-show",value:t.keyword,expression:"keyword"}],ref:"resultScroll",staticClass:"result-scroll",attrs:{options:t.scrollOption}},[i("ul",{staticClass:"result"},[t.noResult?i("div",{staticClass:"no-result"}):t._e(),t._l(t.result,function(e){return i("li",{key:e.id,on:{click:function(i){return t.chooseCity(e)}}},[t._v("\n        "+t._s(e.name)+"\n      ")])})],2)])],1)},u=[];i("7f7f");function l(t,e){var i=Object.keys(t);return Object.getOwnPropertySymbols&&i.push.apply(i,Object.getOwnPropertySymbols(t)),e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i}function h(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?l(i,!0).forEach(function(e){Object(c["a"])(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):l(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}var f={name:"city-search",props:{cityList:Object},activated:function(){this.isFocus=!1,this.keyword="",this.searchStyle=""},data:function(){return{scrollOption:{preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|LI)$/}},keyword:"",isFocus:!1,result:[],searchStyle:""}},computed:{noResult:function(){return this.keyword&&!this.result.length}},watch:{keyword:function(t){if(t){var e=[];for(var i in this.cityList)this.cityList[i].forEach(function(i){-1===i.name.indexOf(t)&&-1===i.spell.indexOf(t)||e.push(i)});this.result=e}else this.result=[]}},methods:h({handleFocus:function(){this.searchStyle="bottom:0;",this.isFocus=!0},handleBlur:function(){this.keyword||(this.searchStyle="",this.isFocus=!1)},cancelSearch:function(){this.keyword="",this.handleBlur()},chooseCity:function(t){this.$emit("choose",t)}},Object(o["mapMutations"])(["changeCurrentCity"]))},y=f,d=(i("4f46"),i("2877")),p=Object(d["a"])(y,a,u,!1,null,"52ad76ba",null),v=p.exports,b=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},m=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tab-bar"},[i("div",[i("div",{staticClass:"active"},[t._v("国内")])]),i("div",[i("div",[t._v("国际/地区")])])])}],C={name:"city-tabbar"},O=C,w=(i("91f7"),Object(d["a"])(O,b,m,!1,null,"be8cef3e",null)),g=w.exports,_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("better-scroll",{ref:"cityScroll",staticClass:"city-scroll",attrs:{options:t.scrollOption},on:{scroll:t.handleScroll}},[i("div",{staticClass:"content"},[i("div",{staticClass:"area"},[i("div",{ref:"#",staticClass:"title active"},[t._v("#")]),i("div",{staticClass:"sub-title"},[t._v("当前定位")]),i("ul",{staticClass:"clearfix"},[i("li",[i("button",{on:{click:function(e){return t.chooseCity(t.currentCity)}}},[i("i",{staticClass:"iconfont"},[t._v("")]),t._v("\n            "+t._s(t.currentCity.name)+"\n          ")])])]),i("div",{staticClass:"sub-title"},[t._v("历史访问城市")]),i("ul",{staticClass:"clearfix"},t._l(t.historyCity,function(e){return i("li",{key:e.id},[i("button",{on:{click:function(i){return t.chooseCity(e)}}},[t._v(t._s(e.name))])])}),0),i("div",{staticClass:"sub-title"},[t._v("热门城市")]),i("ul",{staticClass:"clearfix"},t._l(t.hotCities,function(e){return i("li",{key:e.id},[i("button",{on:{click:function(i){return t.chooseCity(e)}}},[t._v(t._s(e.name))])])}),0)]),t._l(t.cityList,function(e,r){return i("ul",{key:r,staticClass:"area"},[i("li",{ref:r,refInFor:!0,staticClass:"title"},[t._v(t._s(r))]),t._l(e,function(e){return i("li",{key:e.id,on:{click:function(i){return t.chooseCity(e)}}},[t._v("\n        "+t._s(e.name)+"\n      ")])})],2)})],2),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isScrolled,expression:"isScrolled"}],staticClass:"sticky",style:t.stickyTop},[t._v("\n    "+t._s(t.currentTitle)+"\n  ")])])},T=[];i("7514");function j(t,e){var i=Object.keys(t);return Object.getOwnPropertySymbols&&i.push.apply(i,Object.getOwnPropertySymbols(t)),e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i}function k(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?j(i,!0).forEach(function(e){Object(c["a"])(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):j(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}var P={name:"city-list",props:{historyCity:Array,hotCities:Array,cityList:Object,letter:String},activated:function(){this.$refs.cityScroll.refresh()},data:function(){return{scrollOption:{probeType:3,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|LI)$/}},scrollY:0,titlePositionArr:[],currentTitle:"",stickyTop:"top:0"}},computed:k({},Object(o["mapState"])(["currentCity"]),{isScrolled:function(){return this.scrollY<0},letterArr:function(){var t=[];for(var e in this.cityList)t.push(e);return t}}),watch:{scrollY:function(t){var e=this;0===this.titlePositionArr.length&&(this.titlePositionArr.push({letter:"#",offsetTop:this.$refs["#"].offsetTop}),this.letterArr.forEach(function(t){e.titlePositionArr.unshift({letter:t,offsetTop:e.$refs[t][0].offsetTop})}));var i=this.titlePositionArr.find(function(e){return t+e.offsetTop<=24&&t+e.offsetTop>0});if(i){var r=t+i.offsetTop-24;this.stickyTop="top:".concat(r,"px;")}else this.stickyTop="top:0;";var n=this.titlePositionArr.find(function(e){return-t>=e.offsetTop});n&&(this.currentTitle=n.letter)},letter:function(t){this.$refs.cityScroll.scrollToElement(this.$refs[this.letter][0]||this.$refs[this.letter])}},methods:{handleScroll:function(t){var e=t.y;this.scrollY=Math.ceil(e)},chooseCity:function(t){this.$emit("choose",t)}}},S=P,x=(i("be42"),Object(d["a"])(S,_,T,!1,null,"27989ed2",null)),A=x.exports,E=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",{staticClass:"alphabet"},t._l(t.letterArr,function(e){return i("li",{key:e,ref:e,refInFor:!0,on:{click:t.handleClick,touchstart:t.handleTouchStart,touchmove:function(e){return e.preventDefault(),t.handleTouchMove(e)},touchend:t.handleTouchEnd}},[t._v("\n    "+t._s(e)+"\n  ")])}),0)},L=[],$={name:"city-alphabet",props:{cityList:Object},mounted:function(){this.sign=this.$refs["#"][0]},data:function(){return{isTouched:!1,touchIndex:0,sign:null,timer:null}},computed:{letterArr:function(){var t=["#"];for(var e in this.cityList)t.push(e);return t}},watch:{touchIndex:function(t){t>=0&&t<this.letterArr.length&&this.$emit("change",this.letterArr[t])}},methods:{handleClick:function(t){this.$emit("change",t.target.innerText)},handleTouchStart:function(){this.isTouched=!0},handleTouchMove:function(t){var e=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){if(e.isTouched){var i=e.sign;e.touchIndex=Math.floor((t.touches[0].clientY-i.offsetTop)/i.offsetHeight)}},16)},handleTouchEnd:function(){this.isTouched=!1}}},D=$,F=(i("d3cf"),Object(d["a"])(D,E,L,!1,null,"11d0b0f7",null)),N=F.exports;function I(t,e){var i=Object.keys(t);return Object.getOwnPropertySymbols&&i.push.apply(i,Object.getOwnPropertySymbols(t)),e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i}function M(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?I(i,!0).forEach(function(e){Object(c["a"])(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):I(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}var R={name:"city",created:function(){this.getCityList()},activated:function(){try{this.historyCity=JSON.parse(localStorage.historyCity)}catch(t){}},data:function(){return{historyCity:[],hotCities:[],cityList:{},letter:""}},methods:M({getCityList:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,i,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("data/city.json");case 2:if(e=t.sent,i=e.data,i.ret){t.next=6;break}return t.abrupt("return");case 6:r=i.data,this.hotCities=r.hotCities,this.cityList=r.cities;case 9:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),changeLetter:function(t){this.letter=t},chooseCity:function(t){this.changeCurrentCity(t);var e=this.historyCity.findIndex(function(e){return e.id===t.id});-1!==e&&this.historyCity.splice(e,1),this.historyCity.unshift(t),this.historyCity.length>3&&this.historyCity.splice(3);try{localStorage.historyCity=JSON.stringify(this.historyCity)}catch(i){}this.$router.push("/")}},Object(o["mapMutations"])(["changeCurrentCity"])),components:{citySearch:v,cityTabbar:g,cityList:A,cityAlphabet:N}},B=R,U=(i("f698"),Object(d["a"])(B,r,n,!1,null,"29f9c096",null));e["default"]=U.exports},"20d6":function(t,e,i){"use strict";var r=i("5ca1"),n=i("0a49")(6),s="findIndex",c=!0;s in[]&&Array(1)[s](function(){c=!1}),r(r.P+r.F*c,"Array",{findIndex:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),i("9c6c")(s)},"22d2":function(t,e,i){},3218:function(t,e,i){},"3b50":function(t,e,i){},"4f46":function(t,e,i){"use strict";var r=i("7f25"),n=i.n(r);n.a},7514:function(t,e,i){"use strict";var r=i("5ca1"),n=i("0a49")(5),s="find",c=!0;s in[]&&Array(1)[s](function(){c=!1}),r(r.P+r.F*c,"Array",{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),i("9c6c")(s)},"7f25":function(t,e,i){},"91f7":function(t,e,i){"use strict";var r=i("3218"),n=i.n(r);n.a},abb7:function(t,e,i){},be42:function(t,e,i){"use strict";var r=i("abb7"),n=i.n(r);n.a},cd1c:function(t,e,i){var r=i("e853");t.exports=function(t,e){return new(r(t))(e)}},d3cf:function(t,e,i){"use strict";var r=i("3b50"),n=i.n(r);n.a},e853:function(t,e,i){var r=i("d3f4"),n=i("1169"),s=i("2b4c")("species");t.exports=function(t){var e;return n(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!n(e.prototype)||(e=void 0),r(e)&&(e=e[s],null===e&&(e=void 0))),void 0===e?Array:e}},f698:function(t,e,i){"use strict";var r=i("22d2"),n=i.n(r);n.a}}]);
//# sourceMappingURL=City.dc1315ff.js.map