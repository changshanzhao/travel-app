(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Home"],{"0bc8":function(t,e,r){"use strict";var a=r("e1bf"),s=r.n(a);s.a},"15b4":function(t,e,r){"use strict";var a=r("20b7"),s=r.n(a);s.a},"1af6":function(t,e,r){var a=r("63b6");a(a.S,"Array",{isArray:r("9003")})},"1ff6":function(t,e,r){},"20b7":function(t,e,r){},"20fd":function(t,e,r){"use strict";var a=r("d9f6"),s=r("aebd");t.exports=function(t,e,r){e in t?a.f(t,e,s(0,r)):t[e]=r}},"22cd":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("home-header",{attrs:{"scroll-y":t.scrollY}}),r("home-local-hot",{directives:[{name:"show",rawName:"v-show",value:t.topLocalHotVisible,expression:"topLocalHotVisible"}],attrs:{localHot:t.localHot}}),r("better-scroll",{ref:"homeScroll",staticClass:"home-scroll",attrs:{options:t.scrollOption},on:{scroll:t.handleScroll,pullingUp:t.getSightData}},[r("div",{staticClass:"content"},[r("home-swiper",{attrs:{swiperImages:t.swiperImages}}),r("home-local-nav",{attrs:{localNavs:t.localNavs}}),r("home-grid-nav",{attrs:{gridNavs:t.gridNavs}}),r("home-subnav",{attrs:{subnavs:t.subnavs}}),r("div",{staticClass:"welcome"},[r("div",{staticClass:"weather"},[r("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[r("use",{attrs:{"xlink:href":"#iconduoyun"}})]),r("span",{staticClass:"temperature"},[t._v("35℃")])]),t._v("\n        您好,欢迎来到"+t._s(t.currentCity.name)+"\n      ")]),r("home-popular",{attrs:{popularList:t.popularList}}),r("home-recommend",{attrs:{recommend:t.recommend}}),r("home-local-hot",{ref:"localHot",attrs:{localHot:t.localHot}}),r("home-waterfall",{attrs:{sight:t.sight,pagenum:t.pagenum,pagesize:t.pagesize},on:{finishPullUp:t.finishPullUp}})],1)])],1)},s=[],n=(r("8e6e"),r("ac6a"),r("456d"),r("a745")),i=r.n(n);function o(t){if(i()(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}var c=r("774e"),l=r.n(c),u=r("c8bb"),f=r.n(u);function p(t){if(f()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return l()(t)}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function d(t){return o(t)||p(t)||h()}r("96cf");var m=r("3b8d"),v=r("bd86"),g=r("5880"),b=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"header",style:t.headerStyle},[r("div",{staticClass:"header-left"},[r("router-link",{style:t.cityStyle,attrs:{to:"/city"}},[r("div",{staticClass:"city"},[t._v(t._s(t.currentCity.name))]),r("i",{staticClass:"iconfont"},[t._v(" ")])])],1),r("div",{staticClass:"search"},[r("i",{staticClass:"iconfont"},[t._v("")]),r("input",{style:t.searchStyle,attrs:{type:"search",placeholder:t.currentCity.name+"攻略·游记·精选酒店"}})]),r("div",{staticClass:"header-right"},[r("div",{staticClass:"circle",style:t.circleStyle},[r("span",{style:t.pointStyle}),r("span",{style:t.pointStyle}),r("span",{style:t.pointStyle})])])])},y=[];r("c5f6");function _(t,e){var r=Object.keys(t);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(t)),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r}function C(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_(r,!0).forEach(function(e){Object(v["a"])(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var w={name:"home-header",props:{scrollY:Number},data:function(){return{headerStyle:{backgroundColor:"rgba(255, 255, 255, 0)",boxShadow:"none"},searchStyle:{backgroundColor:"rgba(255, 255, 255, 1)"},circleStyle:{borderColor:"rgb(255,255,255)"},pointStyle:{backgroundColor:"rgb(255,255,255)"},cityStyle:{color:"rgb(255,255,255)"},flag:!1}},computed:C({},Object(g["mapState"])(["currentCity"])),watch:{scrollY:function(t){if(t<=-90){if(this.flag)return;t=-90,this.headerStyle.boxShadow="0 0.04rem 0.04rem rgba(0,0,0,.1)"}else this.flag=!1,this.headerStyle.boxShadow="none";this.headerStyle.backgroundColor="rgba(255,255,255,".concat(t/-90,")");var e=255+t/1350*255,r="rgb(".concat(e,",").concat(e,",").concat(e,")");this.searchStyle.backgroundColor=r,this.circleStyle.borderColor=r,e=255+t/150*255,r="rgb(".concat(e,",").concat(e,",").concat(e,")"),this.cityStyle.color=r,this.pointStyle.backgroundColor=r,-90===t&&(this.flag=!0)}}},O=w,S=(r("0bc8"),r("2877")),j=Object(S["a"])(O,b,y,!1,null,"309e5340",null),x=j.exports,N=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"wrapper"},[r("swiper",{ref:"mySwiper",staticClass:"swiper",attrs:{options:t.swiperOption},scopedSlots:t._u([{key:"pagination",fn:function(){return[r("div",{staticClass:"swiper-pagination"})]},proxy:!0}])},t._l(t.swiperImages,function(t){return r("swiper-slide",{key:t.id},[r("img",{staticClass:"swiper-img",attrs:{src:t.url}})])}),1)],1)},A=[],E={name:"home-swiper",props:{swiperImages:Array},data:function(){return{swiperOption:{pagination:".swiper-pagination",loop:!0,autoplay:3e3,speed:200}}}},I=E,k=(r("4354"),Object(S["a"])(I,N,A,!1,null,"c342d35e",null)),H=k.exports,P=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"local-nav-wrapper"},[r("ul",{staticClass:"local-nav"},t._l(t.localNavs,function(e){return r("li",{key:e.id},[r("a",{attrs:{href:"javascript:;"}},[r("div"),r("p",[t._v(t._s(e.title))])])])}),0)])},$=[],L={name:"home-local-nav",props:{localNavs:Array}},D=L,F=(r("fd53"),Object(S["a"])(D,P,$,!1,null,"16faefeb",null)),T=F.exports,U=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"grid-nav"},t._l(t.gridNavs,function(e){return r("div",{key:e.id,class:e.title},t._l(e.children,function(e){return r("a",{key:e.id,attrs:{href:"javascript:;"}},[r("div",[e.title?r("span",{staticClass:"title"},[t._v(t._s(e.title))]):t._e(),e.hot?r("span",{staticClass:"hot"},[t._v(t._s(e.hot))]):t._e(),e.tag?r("span",{staticClass:"tag"},[t._v(t._s(e.tag))]):t._e()])])}),0)}),0)},R=[],Y={name:"home-grid-nav",props:{gridNavs:Array}},z=Y,V=(r("4155"),Object(S["a"])(z,U,R,!1,null,"7c8aa622",null)),W=V.exports,M=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",{staticClass:"subnav"},t._l(t.subnavs,function(e){return r("li",{key:e.id},[r("a",{attrs:{href:"javascript:;"}},[r("div",{staticClass:"subnav-image"}),r("p",{staticClass:"subnav-title"},[t._v(t._s(e.title))])])])}),0)},G=[],J={name:"home-subnav",props:{subnavs:Array}},X=J,q=(r("35de"),Object(S["a"])(X,M,G,!1,null,"fca2e7b0",null)),B=q.exports,K=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"popular"},[t._m(0),t._l(t.popularList,function(e){return r("div",{key:e.title,class:e.title},[r("img",{attrs:{src:e.img}}),r("div",{staticClass:"list"},[r("div",[t._v("景点人气榜")]),t._l(e.list,function(e,a){return r("p",{key:a},[r("span",[t._v(t._s(a+1))]),t._v("\n        "+t._s(e)+"\n      ")])})],2),r("div",{staticClass:"more iconfont"},[t._v("")])])})],2)},Q=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"head"},[r("div",{staticClass:"title"},[t._v("排行榜")]),r("div",{staticClass:"more iconfont"},[t._v("更多")])])}],Z={name:"home-popular",props:{popularList:Array}},tt=Z,et=(r("dfc7"),Object(S["a"])(tt,K,Q,!1,null,"2183fa62",null)),rt=et.exports,at=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"recommend"},[t._m(0),r("div",{staticClass:"body"},t._l(t.recommend,function(e,a){return r("div",{key:a,staticClass:"row"},t._l(e,function(e,a){return r("div",{key:a,staticClass:"column"},[e.tag?r("div",{staticClass:"tag iconfont"},[t._v("\n          "+t._s(e.tag)+"\n        ")]):t._e(),r("img",{attrs:{src:e.img}}),e.title?r("div",{staticClass:"title"},[t._v(t._s(e.title))]):t._e(),e.sight?r("p",[t._v(t._s(e.sight))]):t._e(),e.about?r("p",[t._v(t._s(e.about))]):t._e()])}),0)}),0)])},st=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"head"},[r("div",{staticClass:"title"},[t._v("玩法研究院")]),r("div",{staticClass:"more iconfont"},[t._v("更多")])])}],nt={name:"home-recommend",props:{recommend:Array}},it=nt,ot=(r("15b4"),Object(S["a"])(it,at,st,!1,null,"ec6126b4",null)),ct=ot.exports,lt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"local-hot"},[r("div",{staticClass:"title"},[t._v("当地热门")]),r("ul",t._l(t.localHot,function(e){return r("li",{key:e.id},[r("a",{attrs:{href:"javascript:;"}},[r("img",{attrs:{src:e.img}}),r("p",[t._v(t._s(e.title))])])])}),0)])},ut=[],ft={name:"home-local-hot",props:{localHot:Array}},pt=ft,ht=(r("ba17"),Object(S["a"])(pt,lt,ut,!1,null,"60f7ac22",null)),dt=ht.exports,mt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{ref:"waterfall",staticClass:"waterfall"},t._l(t.sight,function(e,a){return r("div",{key:e.id+a,staticClass:"item"},[r("img",{attrs:{src:e.imgUrl},on:{load:t.imageLoaded}}),r("div",{staticClass:"text"},[r("div",{staticClass:"title"},[t._v(t._s(e.name))]),e.shortFeatures.length>0?r("div",{staticClass:"shortFeatures clearfix"},t._l(e.shortFeatures,function(e){return r("span",{key:e},[t._v(t._s(e))])}),0):t._e(),r("div",{staticClass:"sightCategoryInfo"},[t._v(t._s(e.sightCategoryInfo))]),r("div",{staticClass:"about clearfix"},[r("span",{staticClass:"price"},[t._v("￥"),r("span",{staticClass:"num"},[t._v(t._s(e.price))]),t._v("起")]),r("span",{staticClass:"distanceStr"},[t._v(t._s(e.distanceStr))])])])])}),0)},vt=[],gt={name:"home-waterfall",props:{sight:Array,pagenum:Number,pagesize:Number},updated:function(){this.waterfall=this.$refs.waterfall,this.items=this.waterfall.children,this.itemWidth=this.items[0].offsetWidth},data:function(){return{viewHeight:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,waterfall:null,items:null,itemWidth:0,gap:10,columns:[],loadedImagesCount:0}},watch:{loadedImagesCount:function(t){t===this.sight.length&&(this.renderWaterFall(),this.$emit("finishPullUp"))}},methods:{imageLoaded:function(){this.loadedImagesCount++},renderWaterFall:function(){for(var t=this.gap,e=(this.pagenum-1)*this.pagesize;e<this.items.length;e++)if(e<2)this.items[e].style.top=0,this.items[e].style.left=(this.itemWidth+t)*e+"px",this.columns.push(this.items[e].offsetHeight);else{for(var r=this.columns[0],a=0,s=0;s<this.columns.length;s++)r>this.columns[s]&&(r=this.columns[s],a=s);this.items[e].style.top=this.columns[a]+t+"px",this.items[e].style.left=this.items[a].offsetLeft+"px",this.columns[a]=this.columns[a]+this.items[e].offsetHeight+t;for(var n=this.columns[0],i=0;i<this.columns.length;i++)n<this.columns[i]&&(n=this.columns[i]);this.waterfall.style.height=n+"px"}}}},bt=gt,yt=(r("7dfb"),Object(S["a"])(bt,mt,vt,!1,null,"06c91c22",null)),_t=yt.exports;function Ct(t,e){var r=Object.keys(t);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(t)),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r}function wt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ct(r,!0).forEach(function(e){Object(v["a"])(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ct(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var Ot={name:"home",created:function(){this.getHomeData()},activated:function(){this.$refs.homeScroll.refresh()},updated:function(){this.localHotOffsetTop=this.$refs.localHot.$el.offsetTop},data:function(){return{swiperImages:[],localNavs:[],gridNavs:[],subnavs:[],popularList:[],recommend:[],localHot:[],scrollOption:{probeType:3,bounce:{top:!1,bottom:!1,left:!1,right:!1},pullUpLoad:{threshold:50}},scrollY:0,localHotOffsetTop:1/0,sight:[],pagenum:0,pagesize:10}},computed:wt({topLocalHotVisible:function(){return-this.scrollY>this.localHotOffsetTop}},Object(g["mapState"])(["currentCity"])),watch:{currentCity:function(){this.getHomeData()}},methods:{getHomeData:function(){var t=Object(m["a"])(regeneratorRuntime.mark(function t(){var e,r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("data/home.json?cityid="+this.currentCity.id);case 2:if(e=t.sent,r=e.data,r.ret){t.next=6;break}return t.abrupt("return");case 6:a=r.data,this.swiperImages=a.swiperImages,this.localNavs=a.localNavs,this.gridNavs=a.gridNavs,this.subnavs=a.subnavs,this.popularList=a.popularList,this.recommend=a.recommend,this.localHot=a.localHot,this.getSightData();case 15:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getSightData:function(){var t=Object(m["a"])(regeneratorRuntime.mark(function t(){var e,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.pagenum++,t.next=3,this.$http.get("data/sight".concat((this.pagenum-1)%2,".json"),{params:{cityid:this.currentCity.id,pagenum:this.pagenum,pagesize:this.pagesize}});case 3:e=t.sent,r=e.data,this.sight=[].concat(d(this.sight),d(r));case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),handleScroll:function(t){var e=t.y;this.scrollY=Math.ceil(e)},finishPullUp:function(){this.$refs.homeScroll.finishPullUp()}},components:{homeHeader:x,homeSwiper:H,homeLocalNav:T,homeGridNav:W,homeSubnav:B,homePopular:rt,homeRecommend:ct,homeLocalHot:dt,homeWaterfall:_t}},St=Ot,jt=(r("8b40"),Object(S["a"])(St,a,s,!1,null,"6db1344d",null));e["default"]=jt.exports},"2f42":function(t,e,r){},"35de":function(t,e,r){"use strict";var a=r("9885"),s=r.n(a);s.a},4155:function(t,e,r){"use strict";var a=r("9063"),s=r.n(a);s.a},4354:function(t,e,r){"use strict";var a=r("ea0c"),s=r.n(a);s.a},"549b":function(t,e,r){"use strict";var a=r("d864"),s=r("63b6"),n=r("241e"),i=r("b0dc"),o=r("3702"),c=r("b447"),l=r("20fd"),u=r("7cd6");s(s.S+s.F*!r("4ee1")(function(t){Array.from(t)}),"Array",{from:function(t){var e,r,s,f,p=n(t),h="function"==typeof this?this:Array,d=arguments.length,m=d>1?arguments[1]:void 0,v=void 0!==m,g=0,b=u(p);if(v&&(m=a(m,d>2?arguments[2]:void 0,2)),void 0==b||h==Array&&o(b))for(e=c(p.length),r=new h(e);e>g;g++)l(r,g,v?m(p[g],g):p[g]);else for(f=b.call(p),r=new h;!(s=f.next()).done;g++)l(r,g,v?i(f,m,[s.value,g],!0):s.value);return r.length=g,r}})},"54a1":function(t,e,r){r("6c1c"),r("1654"),t.exports=r("95d5")},"5dbc":function(t,e,r){var a=r("d3f4"),s=r("8b97").set;t.exports=function(t,e,r){var n,i=e.constructor;return i!==r&&"function"==typeof i&&(n=i.prototype)!==r.prototype&&a(n)&&s&&s(t,n),t}},"6f2e":function(t,e,r){},7219:function(t,e,r){},"774e":function(t,e,r){t.exports=r("d2d5")},"7dfb":function(t,e,r){"use strict";var a=r("1ff6"),s=r.n(a);s.a},"8b40":function(t,e,r){"use strict";var a=r("d371"),s=r.n(a);s.a},"8b97":function(t,e,r){var a=r("d3f4"),s=r("cb7c"),n=function(t,e){if(s(t),!a(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,a){try{a=r("9b43")(Function.call,r("11e9").f(Object.prototype,"__proto__").set,2),a(t,[]),e=!(t instanceof Array)}catch(s){e=!0}return function(t,r){return n(t,r),e?t.__proto__=r:a(t,r),t}}({},!1):void 0),check:n}},9003:function(t,e,r){var a=r("6b4c");t.exports=Array.isArray||function(t){return"Array"==a(t)}},9063:function(t,e,r){},"95d5":function(t,e,r){var a=r("40c3"),s=r("5168")("iterator"),n=r("481b");t.exports=r("584a").isIterable=function(t){var e=Object(t);return void 0!==e[s]||"@@iterator"in e||n.hasOwnProperty(a(e))}},9885:function(t,e,r){},a745:function(t,e,r){t.exports=r("f410")},aa77:function(t,e,r){var a=r("5ca1"),s=r("be13"),n=r("79e5"),i=r("fdef"),o="["+i+"]",c="​",l=RegExp("^"+o+o+"*"),u=RegExp(o+o+"*$"),f=function(t,e,r){var s={},o=n(function(){return!!i[t]()||c[t]()!=c}),l=s[t]=o?e(p):i[t];r&&(s[r]=l),a(a.P+a.F*o,"String",s)},p=f.trim=function(t,e){return t=String(s(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(u,"")),t};t.exports=f},ba17:function(t,e,r){"use strict";var a=r("2f42"),s=r.n(a);s.a},c5f6:function(t,e,r){"use strict";var a=r("7726"),s=r("69a8"),n=r("2d95"),i=r("5dbc"),o=r("6a99"),c=r("79e5"),l=r("9093").f,u=r("11e9").f,f=r("86cc").f,p=r("aa77").trim,h="Number",d=a[h],m=d,v=d.prototype,g=n(r("2aeb")(v))==h,b="trim"in String.prototype,y=function(t){var e=o(t,!1);if("string"==typeof e&&e.length>2){e=b?e.trim():p(e,3);var r,a,s,n=e.charCodeAt(0);if(43===n||45===n){if(r=e.charCodeAt(2),88===r||120===r)return NaN}else if(48===n){switch(e.charCodeAt(1)){case 66:case 98:a=2,s=49;break;case 79:case 111:a=8,s=55;break;default:return+e}for(var i,c=e.slice(2),l=0,u=c.length;l<u;l++)if(i=c.charCodeAt(l),i<48||i>s)return NaN;return parseInt(c,a)}}return+e};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof d&&(g?c(function(){v.valueOf.call(r)}):n(r)!=h)?i(new m(y(e)),r,d):y(e)};for(var _,C=r("9e1e")?l(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;C.length>w;w++)s(m,_=C[w])&&!s(d,_)&&f(d,_,u(m,_));d.prototype=v,v.constructor=d,r("2aba")(a,h,d)}},c8bb:function(t,e,r){t.exports=r("54a1")},d2d5:function(t,e,r){r("1654"),r("549b"),t.exports=r("584a").Array.from},d371:function(t,e,r){},dfc7:function(t,e,r){"use strict";var a=r("6f2e"),s=r.n(a);s.a},e1bf:function(t,e,r){},ea0c:function(t,e,r){},f410:function(t,e,r){r("1af6"),t.exports=r("584a").Array.isArray},fd53:function(t,e,r){"use strict";var a=r("7219"),s=r.n(a);s.a},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=Home.ebd526c6.js.map