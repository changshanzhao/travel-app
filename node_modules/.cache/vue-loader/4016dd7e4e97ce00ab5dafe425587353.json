{"remainingRequest":"C:\\Users\\Lenovo\\Downloads\\Compressed\\travel-master\\travel-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Lenovo\\Downloads\\Compressed\\travel-master\\travel-master\\src\\pages\\city\\city.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Lenovo\\Downloads\\Compressed\\travel-master\\travel-master\\src\\pages\\city\\city.vue","mtime":1596367404000},{"path":"C:\\Users\\Lenovo\\Downloads\\Compressed\\travel-master\\travel-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1708077614823},{"path":"C:\\Users\\Lenovo\\Downloads\\Compressed\\travel-master\\travel-master\\node_modules\\babel-loader\\lib\\index.js","mtime":1708077616092},{"path":"C:\\Users\\Lenovo\\Downloads\\Compressed\\travel-master\\travel-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1708077614823},{"path":"C:\\Users\\Lenovo\\Downloads\\Compressed\\travel-master\\travel-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1708077599485}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapMutations } from 'vuex'\nimport citySearch from './components/search'\nimport cityTabbar from './components/tabbar'\nimport cityList from './components/cityList'\nimport cityAlphabet from './components/alphabet'\n\nexport default {\n  name: 'city',\n  created() {\n    this.getCityList()\n  },\n  activated() {\n    // 从本地获得历史记录\n    try {\n      this.historyCity = JSON.parse(localStorage.historyCity)\n    } catch (error) {}\n  },\n  data() {\n    return {\n      // 历史访问城市\n      historyCity: [],\n      // 热门城市列表\n      hotCities: [],\n      // 所有城市列表\n      cityList: {},\n      // 城市拼音首字母，用于快速定位\n      letter: ''\n    }\n  },\n  methods: {\n    // 获取首页数据\n    async getCityList() {\n      const { data: result } = await this.$http.get('data/city.json')\n      if (!result.ret) return\n      const data = result.data\n      this.hotCities = data.hotCities\n      this.cityList = data.cities\n    },\n    // 保存当前选择的城市拼音首字母\n    changeLetter(letter) {\n      this.letter = letter\n    },\n    chooseCity(city) {\n      // 更改当前城市\n      this.changeCurrentCity(city)\n      // 历史记录中是否已存在此城市\n      let index = this.historyCity.findIndex(item => item.id === city.id)\n      // 如果已存在，删除\n      if (index !== -1) this.historyCity.splice(index, 1)\n      // 在数组头部添加新的历史记录\n      this.historyCity.unshift(city)\n      // 如果历史记录多于3条，删除旧的记录\n      if (this.historyCity.length > 3) this.historyCity.splice(3)\n      // 将历史记录保存到本地\n      try {\n        localStorage.historyCity = JSON.stringify(this.historyCity)\n      } catch (error) {}\n      // 回到首页\n      this.$router.push('/')\n    },\n    ...mapMutations(['changeCurrentCity'])\n  },\n  components: {\n    citySearch,\n    cityTabbar,\n    cityList,\n    cityAlphabet\n  }\n}\n",{"version":3,"sources":["city.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"city.vue","sourceRoot":"src/pages/city","sourcesContent":["<template>\n  <div class=\"city\">\n    <city-search :cityList=\"cityList\" @choose=\"chooseCity\"></city-search>\n    <city-tabbar></city-tabbar>\n    <city-list\n      :historyCity=\"historyCity\"\n      :hotCities=\"hotCities\"\n      :cityList=\"cityList\"\n      :letter=\"letter\"\n      @choose=\"chooseCity\"\n    ></city-list>\n    <city-alphabet :cityList=\"cityList\" @change=\"changeLetter\"></city-alphabet>\n  </div>\n</template>\n\n<script>\nimport { mapMutations } from 'vuex'\nimport citySearch from './components/search'\nimport cityTabbar from './components/tabbar'\nimport cityList from './components/cityList'\nimport cityAlphabet from './components/alphabet'\n\nexport default {\n  name: 'city',\n  created() {\n    this.getCityList()\n  },\n  activated() {\n    // 从本地获得历史记录\n    try {\n      this.historyCity = JSON.parse(localStorage.historyCity)\n    } catch (error) {}\n  },\n  data() {\n    return {\n      // 历史访问城市\n      historyCity: [],\n      // 热门城市列表\n      hotCities: [],\n      // 所有城市列表\n      cityList: {},\n      // 城市拼音首字母，用于快速定位\n      letter: ''\n    }\n  },\n  methods: {\n    // 获取首页数据\n    async getCityList() {\n      const { data: result } = await this.$http.get('data/city.json')\n      if (!result.ret) return\n      const data = result.data\n      this.hotCities = data.hotCities\n      this.cityList = data.cities\n    },\n    // 保存当前选择的城市拼音首字母\n    changeLetter(letter) {\n      this.letter = letter\n    },\n    chooseCity(city) {\n      // 更改当前城市\n      this.changeCurrentCity(city)\n      // 历史记录中是否已存在此城市\n      let index = this.historyCity.findIndex(item => item.id === city.id)\n      // 如果已存在，删除\n      if (index !== -1) this.historyCity.splice(index, 1)\n      // 在数组头部添加新的历史记录\n      this.historyCity.unshift(city)\n      // 如果历史记录多于3条，删除旧的记录\n      if (this.historyCity.length > 3) this.historyCity.splice(3)\n      // 将历史记录保存到本地\n      try {\n        localStorage.historyCity = JSON.stringify(this.historyCity)\n      } catch (error) {}\n      // 回到首页\n      this.$router.push('/')\n    },\n    ...mapMutations(['changeCurrentCity'])\n  },\n  components: {\n    citySearch,\n    cityTabbar,\n    cityList,\n    cityAlphabet\n  }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n.city {\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  z-index: 9999;\n  background-color: #fff;\n  overflow: hidden;\n}\n</style>\n"]}]}