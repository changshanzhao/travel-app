{"remainingRequest":"C:\\Users\\Lenovo\\Downloads\\Compressed\\travel-master\\travel-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Lenovo\\Downloads\\Compressed\\travel-master\\travel-master\\src\\pages\\city\\components\\search.vue?vue&type=style&index=0&id=52ad76ba&lang=stylus&scoped=true&","dependencies":[{"path":"C:\\Users\\Lenovo\\Downloads\\Compressed\\travel-master\\travel-master\\src\\pages\\city\\components\\search.vue","mtime":1596367404000},{"path":"C:\\Users\\Lenovo\\Downloads\\Compressed\\travel-master\\travel-master\\node_modules\\css-loader\\index.js","mtime":1708077612774},{"path":"C:\\Users\\Lenovo\\Downloads\\Compressed\\travel-master\\travel-master\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1708077599748},{"path":"C:\\Users\\Lenovo\\Downloads\\Compressed\\travel-master\\travel-master\\node_modules\\postcss-loader\\src\\index.js","mtime":1708077605406},{"path":"C:\\Users\\Lenovo\\Downloads\\Compressed\\travel-master\\travel-master\\node_modules\\stylus-loader\\index.js","mtime":1708077599179},{"path":"C:\\Users\\Lenovo\\Downloads\\Compressed\\travel-master\\travel-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1708077614823},{"path":"C:\\Users\\Lenovo\\Downloads\\Compressed\\travel-master\\travel-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1708077599485}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import '~styles/varibles.styl';\n\n.search {\n  position: absolute;\n  z-index: 1020;\n  top: 0;\n  left: 0;\n  right: 0;\n  background-color: rgba(0, 0, 0, 0.2);\n\n  .header {\n    position: relative;\n    z-index: 1040;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 0.8rem;\n    background-color: #fff;\n\n    .close {\n      text-align: center;\n\n      .iconfont {\n        padding: 0 0.14rem 0 0.38rem;\n        line-height: 0.56rem;\n        font-size: 12px;\n        font-weight: 700;\n      }\n    }\n\n    .input {\n      display: flex;\n      align-items: center;\n      flex: 1;\n\n      .iconfont {\n        position: absolute;\n        margin-left: 0.36rem;\n      }\n\n      input {\n        flex: 1;\n        margin: 0 0.24rem;\n        padding: 0 0.24rem 0 0.56rem;\n        line-height: 0.56rem;\n        border-radius: 0.08rem;\n        background-color: #eee;\n      }\n    }\n\n    .cancel {\n      line-height: 0.56rem;\n      padding-right: 0.24rem;\n    }\n  }\n\n  .result-scroll {\n    position: absolute;\n    z-index: 1030;\n    top: 0.8rem;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background-color: #fff;\n\n    &::before {\n      content: '';\n      position: absolute;\n      z-index: 1040;\n      left: 0;\n      right: 0;\n      height: 0.02rem;\n      background-color: #eee;\n    }\n\n    >ul {\n      background-color: #fff;\n\n      >li {\n        padding: 0 0.4rem;\n        line-height: 0.84rem;\n\n        &:active {\n          background-color: #f8f8f8;\n        }\n\n        &::after {\n          content: '';\n          display: block;\n          height: 0.01rem;\n          margin-bottom: -0.01rem;\n          background-color: #eee;\n        }\n      }\n\n      .no-result {\n        width: 4rem;\n        height: 4rem;\n        margin: 0 auto;\n        background: url('~images/no-result.png') no-repeat;\n        background-size: contain;\n      }\n    }\n  }\n}\n",{"version":3,"sources":["search.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiIA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"search.vue","sourceRoot":"src/pages/city/components","sourcesContent":["<template>\n  <div class=\"search\" :style=\"searchStyle\">\n    <div class=\"header\">\n      <div class=\"close\" v-show=\"!isFocus\">\n        <router-link to=\"/\">\n          <i class=\"iconfont\">&#xe624;</i>\n        </router-link>\n      </div>\n      <div class=\"input\">\n        <i class=\"iconfont\">&#xe632;</i>\n        <input\n          v-model.trim=\"keyword\"\n          type=\"search\"\n          placeholder=\"搜索全球城市\"\n          @focus=\"handleFocus\"\n          @blur=\"handleBlur\"\n        />\n      </div>\n      <div class=\"cancel\" v-show=\"isFocus\" @click=\"cancelSearch\">取消</div>\n    </div>\n    <!-- 结果显示条件：输入框中有非空值 -->\n    <better-scroll\n      class=\"result-scroll\"\n      ref=\"resultScroll\"\n      :options=\"scrollOption\"\n      v-show=\"keyword\"\n    >\n      <ul class=\"result\">\n        <div class=\"no-result\" v-if=\"noResult\"></div>\n        <li v-for=\"item in result\" :key=\"item.id\" @click=\"chooseCity(item)\">\n          {{ item.name }}\n        </li>\n      </ul>\n    </better-scroll>\n  </div>\n</template>\n\n<script>\nimport { mapMutations } from 'vuex'\n\nexport default {\n  name: 'city-search',\n  props: {\n    cityList: Object\n  },\n  activated() {\n    // 组件激活时，重置一些变量，初始化\n    this.isFocus = false\n    this.keyword = ''\n    this.searchStyle = ''\n  },\n  data() {\n    return {\n      // better-scroll配置\n      scrollOption: {\n        preventDefaultException: {\n          tagName: /^(INPUT|TEXTAREA|BUTTON|SELECT|LI)$/\n        }\n      },\n      // 输入的关键词\n      keyword: '',\n      // 输入框是否获得焦点\n      isFocus: false,\n      // 搜索结果\n      result: [],\n      // 本组件样式\n      searchStyle: ''\n    }\n  },\n  computed: {\n    // 搜索结果为空的标识\n    noResult() {\n      return this.keyword && !this.result.length\n    }\n  },\n  watch: {\n    // 监听输入关键词的变化\n    keyword(keyword) {\n      // 如果为空，清空搜索结果并直接退出\n      if (!keyword) {\n        this.result = []\n        return\n      }\n      const tempArr = []\n      // 遍历每一个城市\n      for (let key in this.cityList) {\n        this.cityList[key].forEach(item => {\n          // 如果城市的拼音或名称包含关键词，push进临时数组\n          if (\n            item.name.indexOf(keyword) !== -1 ||\n            item.spell.indexOf(keyword) !== -1\n          ) {\n            tempArr.push(item)\n          }\n        })\n      }\n      this.result = tempArr\n    }\n  },\n  methods: {\n    // 输入框获得焦点时\n    handleFocus() {\n      // 使最外层元素扩大至全屏，成为半透明的遮罩层，滚动区域也会随父元素扩大\n      this.searchStyle = 'bottom:0;'\n      this.isFocus = true\n    },\n    // 输入框失去焦点时\n    handleBlur() {\n      // 如果关键词为空重置之前的改变\n      if (!this.keyword) {\n        this.searchStyle = ''\n        this.isFocus = false\n      }\n    },\n    // 点击取消\n    cancelSearch() {\n      this.keyword = ''\n      this.handleBlur()\n    },\n    // 点击选择城市\n    chooseCity(city) {\n      this.$emit('choose', city)\n    },\n    ...mapMutations(['changeCurrentCity'])\n  }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n@import '~styles/varibles.styl';\n\n.search {\n  position: absolute;\n  z-index: 1020;\n  top: 0;\n  left: 0;\n  right: 0;\n  background-color: rgba(0, 0, 0, 0.2);\n\n  .header {\n    position: relative;\n    z-index: 1040;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 0.8rem;\n    background-color: #fff;\n\n    .close {\n      text-align: center;\n\n      .iconfont {\n        padding: 0 0.14rem 0 0.38rem;\n        line-height: 0.56rem;\n        font-size: 12px;\n        font-weight: 700;\n      }\n    }\n\n    .input {\n      display: flex;\n      align-items: center;\n      flex: 1;\n\n      .iconfont {\n        position: absolute;\n        margin-left: 0.36rem;\n      }\n\n      input {\n        flex: 1;\n        margin: 0 0.24rem;\n        padding: 0 0.24rem 0 0.56rem;\n        line-height: 0.56rem;\n        border-radius: 0.08rem;\n        background-color: #eee;\n      }\n    }\n\n    .cancel {\n      line-height: 0.56rem;\n      padding-right: 0.24rem;\n    }\n  }\n\n  .result-scroll {\n    position: absolute;\n    z-index: 1030;\n    top: 0.8rem;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background-color: #fff;\n\n    &::before {\n      content: '';\n      position: absolute;\n      z-index: 1040;\n      left: 0;\n      right: 0;\n      height: 0.02rem;\n      background-color: #eee;\n    }\n\n    >ul {\n      background-color: #fff;\n\n      >li {\n        padding: 0 0.4rem;\n        line-height: 0.84rem;\n\n        &:active {\n          background-color: #f8f8f8;\n        }\n\n        &::after {\n          content: '';\n          display: block;\n          height: 0.01rem;\n          margin-bottom: -0.01rem;\n          background-color: #eee;\n        }\n      }\n\n      .no-result {\n        width: 4rem;\n        height: 4rem;\n        margin: 0 auto;\n        background: url('~images/no-result.png') no-repeat;\n        background-size: contain;\n      }\n    }\n  }\n}\n</style>\n"]}]}