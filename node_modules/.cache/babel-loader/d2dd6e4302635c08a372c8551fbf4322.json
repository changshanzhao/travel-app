{"remainingRequest":"C:\\Users\\Lenovo\\Downloads\\Compressed\\travel-master\\travel-master\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\Lenovo\\Downloads\\Compressed\\travel-master\\travel-master\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Lenovo\\Downloads\\Compressed\\travel-master\\travel-master\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Lenovo\\Downloads\\Compressed\\travel-master\\travel-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Lenovo\\Downloads\\Compressed\\travel-master\\travel-master\\src\\pages\\city\\city.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Lenovo\\Downloads\\Compressed\\travel-master\\travel-master\\src\\pages\\city\\city.vue","mtime":1596367404000},{"path":"C:\\Users\\Lenovo\\Downloads\\Compressed\\travel-master\\travel-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1708077614823},{"path":"C:\\Users\\Lenovo\\Downloads\\Compressed\\travel-master\\travel-master\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1708077599437},{"path":"C:\\Users\\Lenovo\\Downloads\\Compressed\\travel-master\\travel-master\\node_modules\\babel-loader\\lib\\index.js","mtime":1708077616092},{"path":"C:\\Users\\Lenovo\\Downloads\\Compressed\\travel-master\\travel-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1708077614823},{"path":"C:\\Users\\Lenovo\\Downloads\\Compressed\\travel-master\\travel-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1708077599485}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.array.find-index\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Lenovo\\\\Downloads\\\\Compressed\\\\travel-master\\\\travel-master\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"C:\\\\Users\\\\Lenovo\\\\Downloads\\\\Compressed\\\\travel-master\\\\travel-master\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { keys.push.apply(keys, Object.getOwnPropertySymbols(object)); } if (enumerableOnly) keys = keys.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapMutations } from 'vuex';\nimport citySearch from \"./components/search\";\nimport cityTabbar from \"./components/tabbar\";\nimport cityList from \"./components/cityList\";\nimport cityAlphabet from \"./components/alphabet\";\nexport default {\n  name: 'city',\n  created: function created() {\n    this.getCityList();\n  },\n  activated: function activated() {\n    // 从本地获得历史记录\n    try {\n      this.historyCity = JSON.parse(localStorage.historyCity);\n    } catch (error) {}\n  },\n  data: function data() {\n    return {\n      // 历史访问城市\n      historyCity: [],\n      // 热门城市列表\n      hotCities: [],\n      // 所有城市列表\n      cityList: {},\n      // 城市拼音首字母，用于快速定位\n      letter: ''\n    };\n  },\n  methods: _objectSpread({\n    // 获取首页数据\n    getCityList: function () {\n      var _getCityList = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var _ref, result, data;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.$http.get('data/city.json');\n\n              case 2:\n                _ref = _context.sent;\n                result = _ref.data;\n\n                if (result.ret) {\n                  _context.next = 6;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 6:\n                data = result.data;\n                this.hotCities = data.hotCities;\n                this.cityList = data.cities;\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getCityList() {\n        return _getCityList.apply(this, arguments);\n      }\n\n      return getCityList;\n    }(),\n    // 保存当前选择的城市拼音首字母\n    changeLetter: function changeLetter(letter) {\n      this.letter = letter;\n    },\n    chooseCity: function chooseCity(city) {\n      // 更改当前城市\n      this.changeCurrentCity(city); // 历史记录中是否已存在此城市\n\n      var index = this.historyCity.findIndex(function (item) {\n        return item.id === city.id;\n      }); // 如果已存在，删除\n\n      if (index !== -1) this.historyCity.splice(index, 1); // 在数组头部添加新的历史记录\n\n      this.historyCity.unshift(city); // 如果历史记录多于3条，删除旧的记录\n\n      if (this.historyCity.length > 3) this.historyCity.splice(3); // 将历史记录保存到本地\n\n      try {\n        localStorage.historyCity = JSON.stringify(this.historyCity);\n      } catch (error) {} // 回到首页\n\n\n      this.$router.push('/');\n    }\n  }, mapMutations(['changeCurrentCity'])),\n  components: {\n    citySearch: citySearch,\n    cityTabbar: cityTabbar,\n    cityList: cityList,\n    cityAlphabet: cityAlphabet\n  }\n};",{"version":3,"sources":["city.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAgBA,SAAA,YAAA,QAAA,MAAA;AACA,OAAA,UAAA;AACA,OAAA,UAAA;AACA,OAAA,QAAA;AACA,OAAA,YAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,MADA;AAEA,EAAA,OAFA,qBAEA;AACA,SAAA,WAAA;AACA,GAJA;AAKA,EAAA,SALA,uBAKA;AACA;AACA,QAAA;AACA,WAAA,WAAA,GAAA,IAAA,CAAA,KAAA,CAAA,YAAA,CAAA,WAAA,CAAA;AACA,KAFA,CAEA,OAAA,KAAA,EAAA,CAAA;AACA,GAVA;AAWA,EAAA,IAXA,kBAWA;AACA,WAAA;AACA;AACA,MAAA,WAAA,EAAA,EAFA;AAGA;AACA,MAAA,SAAA,EAAA,EAJA;AAKA;AACA,MAAA,QAAA,EAAA,EANA;AAOA;AACA,MAAA,MAAA,EAAA;AARA,KAAA;AAUA,GAtBA;AAuBA,EAAA,OAAA;AACA;AACA,IAAA,WAFA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAGA,KAAA,KAAA,CAAA,GAAA,CAAA,gBAAA,CAHA;;AAAA;AAAA;AAGA,gBAAA,MAHA,QAGA,IAHA;;AAAA,oBAIA,MAAA,CAAA,GAJA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAKA,gBAAA,IALA,GAKA,MAAA,CAAA,IALA;AAMA,qBAAA,SAAA,GAAA,IAAA,CAAA,SAAA;AACA,qBAAA,QAAA,GAAA,IAAA,CAAA,MAAA;;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AASA;AACA,IAAA,YAVA,wBAUA,MAVA,EAUA;AACA,WAAA,MAAA,GAAA,MAAA;AACA,KAZA;AAaA,IAAA,UAbA,sBAaA,IAbA,EAaA;AACA;AACA,WAAA,iBAAA,CAAA,IAAA,EAFA,CAGA;;AACA,UAAA,KAAA,GAAA,KAAA,WAAA,CAAA,SAAA,CAAA,UAAA,IAAA;AAAA,eAAA,IAAA,CAAA,EAAA,KAAA,IAAA,CAAA,EAAA;AAAA,OAAA,CAAA,CAJA,CAKA;;AACA,UAAA,KAAA,KAAA,CAAA,CAAA,EAAA,KAAA,WAAA,CAAA,MAAA,CAAA,KAAA,EAAA,CAAA,EANA,CAOA;;AACA,WAAA,WAAA,CAAA,OAAA,CAAA,IAAA,EARA,CASA;;AACA,UAAA,KAAA,WAAA,CAAA,MAAA,GAAA,CAAA,EAAA,KAAA,WAAA,CAAA,MAAA,CAAA,CAAA,EAVA,CAWA;;AACA,UAAA;AACA,QAAA,YAAA,CAAA,WAAA,GAAA,IAAA,CAAA,SAAA,CAAA,KAAA,WAAA,CAAA;AACA,OAFA,CAEA,OAAA,KAAA,EAAA,CAAA,CAdA,CAeA;;;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,GAAA;AACA;AA9BA,KA+BA,YAAA,CAAA,CAAA,mBAAA,CAAA,CA/BA,CAvBA;AAwDA,EAAA,UAAA,EAAA;AACA,IAAA,UAAA,EAAA,UADA;AAEA,IAAA,UAAA,EAAA,UAFA;AAGA,IAAA,QAAA,EAAA,QAHA;AAIA,IAAA,YAAA,EAAA;AAJA;AAxDA,CAAA","sourcesContent":["<template>\n  <div class=\"city\">\n    <city-search :cityList=\"cityList\" @choose=\"chooseCity\"></city-search>\n    <city-tabbar></city-tabbar>\n    <city-list\n      :historyCity=\"historyCity\"\n      :hotCities=\"hotCities\"\n      :cityList=\"cityList\"\n      :letter=\"letter\"\n      @choose=\"chooseCity\"\n    ></city-list>\n    <city-alphabet :cityList=\"cityList\" @change=\"changeLetter\"></city-alphabet>\n  </div>\n</template>\n\n<script>\nimport { mapMutations } from 'vuex'\nimport citySearch from './components/search'\nimport cityTabbar from './components/tabbar'\nimport cityList from './components/cityList'\nimport cityAlphabet from './components/alphabet'\n\nexport default {\n  name: 'city',\n  created() {\n    this.getCityList()\n  },\n  activated() {\n    // 从本地获得历史记录\n    try {\n      this.historyCity = JSON.parse(localStorage.historyCity)\n    } catch (error) {}\n  },\n  data() {\n    return {\n      // 历史访问城市\n      historyCity: [],\n      // 热门城市列表\n      hotCities: [],\n      // 所有城市列表\n      cityList: {},\n      // 城市拼音首字母，用于快速定位\n      letter: ''\n    }\n  },\n  methods: {\n    // 获取首页数据\n    async getCityList() {\n      const { data: result } = await this.$http.get('data/city.json')\n      if (!result.ret) return\n      const data = result.data\n      this.hotCities = data.hotCities\n      this.cityList = data.cities\n    },\n    // 保存当前选择的城市拼音首字母\n    changeLetter(letter) {\n      this.letter = letter\n    },\n    chooseCity(city) {\n      // 更改当前城市\n      this.changeCurrentCity(city)\n      // 历史记录中是否已存在此城市\n      let index = this.historyCity.findIndex(item => item.id === city.id)\n      // 如果已存在，删除\n      if (index !== -1) this.historyCity.splice(index, 1)\n      // 在数组头部添加新的历史记录\n      this.historyCity.unshift(city)\n      // 如果历史记录多于3条，删除旧的记录\n      if (this.historyCity.length > 3) this.historyCity.splice(3)\n      // 将历史记录保存到本地\n      try {\n        localStorage.historyCity = JSON.stringify(this.historyCity)\n      } catch (error) {}\n      // 回到首页\n      this.$router.push('/')\n    },\n    ...mapMutations(['changeCurrentCity'])\n  },\n  components: {\n    citySearch,\n    cityTabbar,\n    cityList,\n    cityAlphabet\n  }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n.city {\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  z-index: 9999;\n  background-color: #fff;\n  overflow: hidden;\n}\n</style>\n"],"sourceRoot":"src/pages/city"}]}