{"remainingRequest":"C:\\Users\\Lenovo\\Downloads\\Compressed\\travel-master\\travel-master\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\Lenovo\\Downloads\\Compressed\\travel-master\\travel-master\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Lenovo\\Downloads\\Compressed\\travel-master\\travel-master\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Lenovo\\Downloads\\Compressed\\travel-master\\travel-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Lenovo\\Downloads\\Compressed\\travel-master\\travel-master\\src\\pages\\home\\home.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Lenovo\\Downloads\\Compressed\\travel-master\\travel-master\\src\\pages\\home\\home.vue","mtime":1596367404000},{"path":"C:\\Users\\Lenovo\\Downloads\\Compressed\\travel-master\\travel-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1708077614823},{"path":"C:\\Users\\Lenovo\\Downloads\\Compressed\\travel-master\\travel-master\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1708077599437},{"path":"C:\\Users\\Lenovo\\Downloads\\Compressed\\travel-master\\travel-master\\node_modules\\babel-loader\\lib\\index.js","mtime":1708077616092},{"path":"C:\\Users\\Lenovo\\Downloads\\Compressed\\travel-master\\travel-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1708077614823},{"path":"C:\\Users\\Lenovo\\Downloads\\Compressed\\travel-master\\travel-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1708077599485}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport _toConsumableArray from \"C:\\\\Users\\\\Lenovo\\\\Downloads\\\\Compressed\\\\travel-master\\\\travel-master\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/toConsumableArray\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Lenovo\\\\Downloads\\\\Compressed\\\\travel-master\\\\travel-master\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"C:\\\\Users\\\\Lenovo\\\\Downloads\\\\Compressed\\\\travel-master\\\\travel-master\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { keys.push.apply(keys, Object.getOwnPropertySymbols(object)); } if (enumerableOnly) keys = keys.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapState } from 'vuex';\nimport homeHeader from \"./components/header\";\nimport homeSwiper from \"./components/swiper\";\nimport homeLocalNav from \"./components/localNav\";\nimport homeGridNav from \"./components/gridNav\";\nimport homeSubnav from \"./components/subnav\";\nimport homePopular from \"./components/popular\";\nimport homeRecommend from \"./components/recommend\";\nimport homeLocalHot from \"./components/lovalHot\";\nimport homeWaterfall from \"./components/waterfall\";\nexport default {\n  name: 'home',\n  created: function created() {\n    this.getHomeData();\n  },\n  activated: function activated() {\n    this.$refs.homeScroll.refresh();\n  },\n  updated: function updated() {\n    this.localHotOffsetTop = this.$refs.localHot.$el.offsetTop;\n  },\n  data: function data() {\n    return {\n      // 轮播图数据\n      swiperImages: [],\n      // 本地导航数据\n      localNavs: [],\n      // 格子导航数据\n      gridNavs: [],\n      // 子导航数据\n      subnavs: [],\n      // 排行榜数据\n      popularList: [],\n      // 玩法研究院数据\n      recommend: [],\n      // 当地热门数据\n      localHot: [],\n      // better-scroll配置\n      scrollOption: {\n        probeType: 3,\n        bounce: {\n          top: false,\n          bottom: false,\n          left: false,\n          right: false\n        },\n        pullUpLoad: {\n          threshold: 50\n        }\n      },\n      // 滚动区域的y坐标\n      scrollY: 0,\n      // 当地热门的offsetTop\n      localHotOffsetTop: Infinity,\n      // 景点信息列表\n      sight: [],\n      // 当前请求的页数(初始为0)\n      pagenum: 0,\n      // 每页数据条数\n      pagesize: 10\n    };\n  },\n  computed: _objectSpread({\n    // 顶部的当地热门是否可见的标识\n    topLocalHotVisible: function topLocalHotVisible() {\n      return -this.scrollY > this.localHotOffsetTop;\n    }\n  }, mapState(['currentCity'])),\n  watch: {\n    // 当前城市变化后重新获得首页数据\n    currentCity: function currentCity() {\n      this.getHomeData();\n    }\n  },\n  methods: {\n    // 获取首页数据\n    getHomeData: function () {\n      var _getHomeData = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var _ref, result, data;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.$http.get('data/home.json?cityid=' + this.currentCity.id);\n\n              case 2:\n                _ref = _context.sent;\n                result = _ref.data;\n\n                if (result.ret) {\n                  _context.next = 6;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 6:\n                data = result.data;\n                this.swiperImages = data.swiperImages;\n                this.localNavs = data.localNavs;\n                this.gridNavs = data.gridNavs;\n                this.subnavs = data.subnavs;\n                this.popularList = data.popularList;\n                this.recommend = data.recommend;\n                this.localHot = data.localHot;\n                this.getSightData();\n\n              case 15:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getHomeData() {\n        return _getHomeData.apply(this, arguments);\n      }\n\n      return getHomeData;\n    }(),\n    // 获取景点列表数据\n    getSightData: function () {\n      var _getSightData = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var _ref2, result;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                this.pagenum++;\n                _context2.next = 3;\n                return this.$http.get(\"data/sight\".concat((this.pagenum - 1) % 2, \".json\"), {\n                  params: {\n                    cityid: this.currentCity.id,\n                    pagenum: this.pagenum,\n                    pagesize: this.pagesize\n                  }\n                });\n\n              case 3:\n                _ref2 = _context2.sent;\n                result = _ref2.data;\n                this.sight = [].concat(_toConsumableArray(this.sight), _toConsumableArray(result));\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getSightData() {\n        return _getSightData.apply(this, arguments);\n      }\n\n      return getSightData;\n    }(),\n    // 页面滚动事件，获取y坐标\n    handleScroll: function handleScroll(_ref3) {\n      var y = _ref3.y;\n      this.scrollY = Math.ceil(y);\n    },\n    // 上拉数据加载完成\n    finishPullUp: function finishPullUp() {\n      this.$refs.homeScroll.finishPullUp();\n    }\n  },\n  components: {\n    homeHeader: homeHeader,\n    homeSwiper: homeSwiper,\n    homeLocalNav: homeLocalNav,\n    homeGridNav: homeGridNav,\n    homeSubnav: homeSubnav,\n    homePopular: homePopular,\n    homeRecommend: homeRecommend,\n    homeLocalHot: homeLocalHot,\n    homeWaterfall: homeWaterfall\n  }\n};",{"version":3,"sources":["home.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <home-header :scroll-y=\"scrollY\"></home-header>\n    <home-local-hot\n      :localHot=\"localHot\"\n      v-show=\"topLocalHotVisible\"\n    ></home-local-hot>\n    <better-scroll\n      class=\"home-scroll\"\n      :ref=\"'homeScroll'\"\n      :options=\"scrollOption\"\n      @scroll=\"handleScroll\"\n      @pullingUp=\"getSightData\"\n    >\n      <div class=\"content\">\n        <home-swiper :swiperImages=\"swiperImages\"></home-swiper>\n        <home-local-nav :localNavs=\"localNavs\"></home-local-nav>\n        <home-grid-nav :gridNavs=\"gridNavs\"></home-grid-nav>\n        <home-subnav :subnavs=\"subnavs\"></home-subnav>\n        <div class=\"welcome\">\n          <div class=\"weather\">\n            <svg class=\"icon\" aria-hidden=\"true\">\n              <use xlink:href=\"#iconduoyun\" />\n            </svg>\n            <span class=\"temperature\">35℃</span>\n          </div>\n          您好,欢迎来到{{ currentCity.name }}\n        </div>\n        <home-popular :popularList=\"popularList\"></home-popular>\n        <home-recommend :recommend=\"recommend\"></home-recommend>\n        <home-local-hot :localHot=\"localHot\" ref=\"localHot\"></home-local-hot>\n        <home-waterfall\n          :sight=\"sight\"\n          :pagenum=\"pagenum\"\n          :pagesize=\"pagesize\"\n          @finishPullUp=\"finishPullUp\"\n        ></home-waterfall>\n      </div>\n    </better-scroll>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nimport homeHeader from './components/header'\nimport homeSwiper from './components/swiper'\nimport homeLocalNav from './components/localNav'\nimport homeGridNav from './components/gridNav'\nimport homeSubnav from './components/subnav'\nimport homePopular from './components/popular'\nimport homeRecommend from './components/recommend'\nimport homeLocalHot from './components/lovalHot'\nimport homeWaterfall from './components/waterfall'\n\nexport default {\n  name: 'home',\n  created() {\n    this.getHomeData()\n  },\n  activated() {\n    this.$refs.homeScroll.refresh()\n  },\n  updated() {\n    this.localHotOffsetTop = this.$refs.localHot.$el.offsetTop\n  },\n  data() {\n    return {\n      // 轮播图数据\n      swiperImages: [],\n      // 本地导航数据\n      localNavs: [],\n      // 格子导航数据\n      gridNavs: [],\n      // 子导航数据\n      subnavs: [],\n      // 排行榜数据\n      popularList: [],\n      // 玩法研究院数据\n      recommend: [],\n      // 当地热门数据\n      localHot: [],\n      // better-scroll配置\n      scrollOption: {\n        probeType: 3,\n        bounce: {\n          top: false,\n          bottom: false,\n          left: false,\n          right: false\n        },\n        pullUpLoad: {\n          threshold: 50\n        }\n      },\n      // 滚动区域的y坐标\n      scrollY: 0,\n      // 当地热门的offsetTop\n      localHotOffsetTop: Infinity,\n      // 景点信息列表\n      sight: [],\n      // 当前请求的页数(初始为0)\n      pagenum: 0,\n      // 每页数据条数\n      pagesize: 10\n    }\n  },\n  computed: {\n    // 顶部的当地热门是否可见的标识\n    topLocalHotVisible() {\n      return -this.scrollY > this.localHotOffsetTop\n    },\n    ...mapState(['currentCity'])\n  },\n  watch: {\n    // 当前城市变化后重新获得首页数据\n    currentCity() {\n      this.getHomeData()\n    }\n  },\n  methods: {\n    // 获取首页数据\n    async getHomeData() {\n      const { data: result } = await this.$http.get(\n        'data/home.json?cityid=' + this.currentCity.id\n      )\n      if (!result.ret) return\n      const data = result.data\n      this.swiperImages = data.swiperImages\n      this.localNavs = data.localNavs\n      this.gridNavs = data.gridNavs\n      this.subnavs = data.subnavs\n      this.popularList = data.popularList\n      this.recommend = data.recommend\n      this.localHot = data.localHot\n      this.getSightData()\n    },\n    // 获取景点列表数据\n    async getSightData() {\n      this.pagenum++\n      const { data: result } = await this.$http.get(\n        `data/sight${(this.pagenum - 1) % 2}.json`,\n        {\n          params: {\n            cityid: this.currentCity.id,\n            pagenum: this.pagenum,\n            pagesize: this.pagesize\n          }\n        }\n      )\n      this.sight = [...this.sight, ...result]\n    },\n    // 页面滚动事件，获取y坐标\n    handleScroll({ y }) {\n      this.scrollY = Math.ceil(y)\n    },\n    // 上拉数据加载完成\n    finishPullUp() {\n      this.$refs.homeScroll.finishPullUp()\n    }\n  },\n  components: {\n    homeHeader,\n    homeSwiper,\n    homeLocalNav,\n    homeGridNav,\n    homeSubnav,\n    homePopular,\n    homeRecommend,\n    homeLocalHot,\n    homeWaterfall\n  }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n.home-scroll {\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background-color: #f8f8f8;\n\n  .welcome {\n    position: relative;\n    margin-bottom: 0.2rem;\n    font-size: 0.32rem;\n    text-align: center;\n    line-height: 0.64rem;\n\n    .weather {\n      position: absolute;\n      left: 0.24rem;\n\n      .icon {\n        font-size: 0.5rem;\n      }\n\n      .temperature {\n        font-size: 0.24rem;\n      }\n    }\n  }\n}\n</style>\n"],"sourceRoot":"src/pages/home"}]}